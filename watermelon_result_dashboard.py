# -*- coding: utf-8 -*-
"""watermelon_result_dashboard

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1JQ2Wu1DGcniCvBmov9qWVE5t0KVFTS_n
"""

import streamlit as st
import pymongo
import pandas as pd
import plotly.express as px

# Connect to MongoDB
client = pymongo.MongoClient("mongodb+srv://qmamnatividad:Pn5WCatJeF5tX1b1@cluster0.zrlxpwc.mongodb.net/")
db = client["watermelon"]
collection = db["watermelon_results"]

# Fetch data from MongoDB and convert it to a DataFrame
data = pd.DataFrame(list(collection.find()))

# Main title
st.title("Data Visualization from MongoDB")

# Display the data table
st.subheader("Data Table")
st.write(data)

# Group data for pie chart
data_grouped = data.groupby('category').size().reset_index(name='count')

# Plot pie chart
st.subheader("Pie Chart")
fig = px.pie(data_grouped, values='count', names='category', title='Data Distribution by Category')
st.plotly_chart(fig)